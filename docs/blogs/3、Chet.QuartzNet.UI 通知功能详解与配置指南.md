# 🔥 Chet.QuartzNet.UI 通知功能详解与配置指南

## 🎯 为什么需要通知功能？

作为开发者，你是不是经常遇到这样的问题：
- 定时任务执行失败了，没人知道，直到业务出问题才发现 😱
- 调度器发生异常，系统崩溃了，半天没察觉 😭
- 想知道任务是否成功执行，还要登录系统查看日志，太麻烦了 😫

别担心！Chet.QuartzNet.UI 的**通知功能**帮你解决这些问题！让你随时随地了解任务执行情况！😍

## ✨ 通知功能有哪些亮点？

### 🔔 多种通知渠道
支持微信、企业微信、钉钉、邮件、短信等多种推送方式，总有一款适合你！

### 📋 三种通知模板
- **HTML模板**：美观的富文本格式，适合微信推送
- **Markdown模板**：简洁的标记语言，适合技术人员
- **纯文本模板**：简单的文本格式，兼容性最好

### 🎯 灵活的通知策略
- 作业成功时发送通知
- 作业失败时发送通知
- 调度器异常时发送通知

### 📊 完整的通知历史
- 查看所有通知记录
- 按状态筛选通知
- 按来源搜索通知
- 支持删除和清空通知

### 🚀 简单易用的配置
三步搞定配置，分分钟就能收到通知！

## 🔍 PushPlus 是什么？

Chet.QuartzNet.UI 使用 PushPlus 作为通知服务提供商。PushPlus 是一个集成了多种推送渠道的通知服务，支持微信、企业微信、钉钉、邮件等多种推送方式，无需自己搭建通知服务器，简单易用！

## 👨💻 如何配置通知功能？

### 1️⃣ 注册 PushPlus 账号

1. 访问 [PushPlus 官网](https://www.pushplus.plus/)
2. 使用微信扫码登录（最方便的方式）
3. 进入「个人中心」获取你的专属 **Token**

### 2️⃣ 配置系统通知

#### 第一步：打开通知配置页面
- 登录 Chet.QuartzNet.UI 系统
- 点击左侧菜单「通知管理」
- 点击左上角「通知配置」按钮

#### 第二步：填写 PushPlus 配置

在弹出的配置对话框中，填写以下信息：

| 配置项 | 说明 | 建议值 |
|-------|------|--------|
| 启用通知 | 开关控制通知功能 | ✅ 开启 |
| Token | PushPlus 个人中心获取的 Token | 复制你的 Token 粘贴到这里 |
| 推送渠道 | 选择通知推送的渠道 | wechat（微信最方便） |
| 消息模板 | 选择通知内容的模板格式 | markdown（技术人员首选） |
| 主题 | 通知主题（可选） | Quartz 任务通知 |

#### 第三步：配置通知策略

根据你的需求，选择需要开启的通知策略：

- ✅ **作业失败时发送**：强烈建议开启，任务失败立即知晓
- ⚠️ **作业成功时发送**：可选，适合重要任务
- ✅ **调度器异常时发送**：强烈建议开启，系统异常立即知晓

### 3️⃣ 测试通知

配置完成后，一定要发送一条测试通知验证配置是否正确！

1. 在通知管理页面点击「发送测试通知」按钮
2. 检查是否收到测试通知
3. 如未收到，检查 Token 是否正确，网络是否正常

## 📝 通知模板展示

### 🎨 HTML 模板

美观的富文本格式，适合微信推送：

```html
<div style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif; font-size: 14px; line-height: 1.5; color: #24292f; max-width: 720px; margin: 0 auto; padding: 20px;">
    <div style="background-color: #ffffff; border: 1px solid #e1e4e8; border-radius: 6px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); overflow: hidden;">
        <div style="background-color: #f0fff4; border-bottom: 1px solid #e1e4e8; padding: 16px 20px;">
            <h1 style="margin: 0; font-size: 20px; font-weight: 600; color: #2da44e;">✅ 作业执行成功: 示例任务</h1>
        </div>
        <!-- 详细作业信息表格 -->
    </div>
</div>
```

### 📋 Markdown 模板

简洁的标记语言，适合技术人员：

```markdown
# ❌ 作业执行失败: 示例任务

## 作业信息

| 项目 | 内容 |
|------|------|
| 作业名称 | 示例任务 |
| 作业分组 | default |
| 执行状态 | ❌ 失败 |
| 执行时间 | 2025-12-08 22:30:00 |
| 执行耗时 | 1500 毫秒 |
| 消息 | 任务执行失败 |
| 错误信息 | System.Exception: 执行过程中发生错误 |

---
此消息由 Chet.QuartzNET.UI 调度系统自动发送，请勿回复。
```

### 📄 纯文本模板

简单的文本格式，兼容性最好：

```
调度器异常

异常时间: 2025-12-08 22:35:00
异常类型: System.InvalidOperationException
异常消息: 调度器初始化失败
堆栈跟踪:    在 Quartz.Impl.StdSchedulerFactory.Instantiate()
   在 QuartzNet.UI.Services.QuartzJobService.StartAsync(CancellationToken cancellationToken)

---
此消息由 Chet.QuartzNET.UI 调度系统自动发送，请勿回复。
```

## 📊 通知历史管理

### 查看通知历史

在「通知管理」页面，你可以查看所有通知记录，包括：
- 通知标题和内容
- 触发来源
- 通知状态（待发送/发送成功/发送失败）
- 创建时间和发送时间
- 发送耗时

### 筛选与搜索

- **状态筛选**：可按通知状态筛选
- **来源搜索**：可按触发来源搜索特定通知

### 删除通知

- **单个删除**：点击每条通知后的「删除」按钮
- **批量清空**：点击「清空」按钮，清空所有通知记录

## ❓ 常见问题排查

### Q: 测试通知发送失败怎么办？
A: 检查这几点：
1. PushPlus Token 是否正确
2. 网络连接是否正常
3. 推送渠道是否支持
4. 查看系统日志获取详细错误信息

### Q: 作业执行时未收到通知怎么办？
A: 检查这几点：
1. 通知功能是否已启用
2. 对应通知策略是否已开启
3. 作业执行状态是否符合通知条件
4. 查看通知历史，确认通知是否已创建

### Q: 通知内容格式不符合预期怎么办？
A: 检查这几点：
1. 消息模板配置是否正确
2. 推送渠道是否支持所选模板格式
3. 不同渠道对模板的支持程度不同

## 💡 通知功能最佳实践

1. **开启关键通知**：建议开启「作业失败时发送」和「调度器异常时发送」通知
2. **选择合适模板**：微信渠道推荐使用 HTML 或 Markdown 模板
3. **定期清理通知**：定期清理通知历史，保持系统性能
4. **测试配置**：每次修改配置后，发送测试通知验证
5. **关注通知状态**：定期查看通知历史，确保通知正常发送

## 🌟 总结

Chet.QuartzNet.UI 的通知功能真的太实用了！配置简单，功能强大，让你随时随地了解任务执行情况，再也不用担心任务失败没人知道啦！

如果你还在为任务监控发愁，不妨试试 Chet.QuartzNet.UI 的通知功能，绝对让你爱不释手！

## 📢 最后想说的话

通知功能是 Chet.QuartzNet.UI 的一大亮点，它能帮你及时了解系统状态，提高运维效率。快去配置你的通知功能吧！

如果这篇文章对你有帮助，记得给项目点个 Star 支持一下作者哦！✨

#dotnet #任务调度 #QuartzNet #通知功能 #PushPlus #开发者工具 #效率神器

---

**⭐ 如果你觉得这篇文章对你有帮助，记得点赞收藏关注哦！**

**📌 更多干货内容，敬请期待！**