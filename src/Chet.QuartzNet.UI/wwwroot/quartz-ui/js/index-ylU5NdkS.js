import{_ as e,e as a,y as l,l as n,n as t,P as o,a as u,v as s,w as i,f as r,h as d,b as v}from"./bootstrap-DWxdiVxZ.js";import{V as c}from"./Checkbox-D5K2oZJS.js";import{u as p,F as m}from"./FormItemContext-C10w-ynQ.js";import{u as f}from"./index-C49OUeuh.js";import{a1 as b,E as h,a6 as g,a8 as x,N as C,aa as k,L as y,p as O,U as S,a2 as w}from"../jse/index-index-CIvC8h5Q.js";const j=()=>e(e({},{name:String,prefixCls:String,options:l([]),disabled:Boolean,id:String}),{defaultValue:l(),value:l(),onChange:a(),"onUpdate:value":a()}),M=()=>e(e({},{prefixCls:String,defaultChecked:n(),checked:n(),disabled:n(),isGroup:n(),value:o.any,name:String,id:String,indeterminate:n(),type:t("checkbox"),autofocus:n(),onChange:a(),"onUpdate:checked":a(),onClick:a(),skipGroup:n(!1)}),{indeterminate:n(!1)}),I=Symbol("CheckboxGroupContext");var V=function(e,a){var l={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&a.indexOf(n)<0&&(l[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var t=0;for(n=Object.getOwnPropertySymbols(e);t<n.length;t++)a.indexOf(n[t])<0&&Object.prototype.propertyIsEnumerable.call(e,n[t])&&(l[n[t]]=e[n[t]])}return l};const $=b({compatConfig:{MODE:3},name:"ACheckbox",inheritAttrs:!1,__ANT_CHECKBOX:!0,props:M(),setup(a,l){let{emit:n,attrs:t,slots:o,expose:b}=l;const S=p(),w=m.useInject(),{prefixCls:j,direction:M,disabled:$}=u("checkbox",a),G=s(),[A,E]=f(j),F=C(I,void 0),P=Symbol("checkboxUniId"),U=h(()=>(null==F?void 0:F.disabled.value)||$.value);g(()=>{!a.skipGroup&&F&&F.registerValue(P,a.value)}),x(()=>{F&&F.cancelValue(P)}),k(()=>{i(!(void 0===a.checked&&!F&&void 0!==a.value))});const _=e=>{const a=e.target.checked;n("update:checked",a),n("change",e),S.onFieldChange()},B=y();return b({focus:()=>{var e;null===(e=B.value)||void 0===e||e.focus()},blur:()=>{var e;null===(e=B.value)||void 0===e||e.blur()}}),()=>{var l;const u=r(null===(l=o.default)||void 0===l?void 0:l.call(o)),{indeterminate:s,skipGroup:i,id:p=S.id.value}=a,m=V(a,["indeterminate","skipGroup","id"]),{onMouseenter:f,onMouseleave:b,onInput:h,class:g,style:x}=t,C=V(t,["onMouseenter","onMouseleave","onInput","class","style"]),k=e(e(e(e({},m),{id:p,prefixCls:j.value}),C),{disabled:U.value});F&&!i?(k.onChange=function(){for(var e=arguments.length,l=new Array(e),t=0;t<e;t++)l[t]=arguments[t];n("change",...l),F.toggleOption({label:u,value:a.value})},k.name=F.name.value,k.checked=F.mergedValue.value.includes(a.value),k.disabled=U.value||G.value,k.indeterminate=s):k.onChange=_;const y=d({[`${j.value}-wrapper`]:!0,[`${j.value}-rtl`]:"rtl"===M.value,[`${j.value}-wrapper-checked`]:k.checked,[`${j.value}-wrapper-disabled`]:k.disabled,[`${j.value}-wrapper-in-form-item`]:w.isFormItemInput},g,E.value),I=d({[`${j.value}-indeterminate`]:s},E.value);return A(O("label",{class:y,style:x,onMouseenter:f,onMouseleave:b},[O(c,v(v({"aria-checked":s?"mixed":void 0},k),{},{class:I,ref:B}),null),u.length?O("span",null,[u]):null]))}}}),G=b({compatConfig:{MODE:3},name:"ACheckboxGroup",inheritAttrs:!1,props:j(),setup(e,a){let{slots:l,attrs:n,emit:t,expose:o}=a;const s=p(),{prefixCls:i,direction:r}=u("checkbox",e),d=h(()=>`${i.value}-group`),[c,m]=f(d),b=y((void 0===e.value?e.defaultValue:e.value)||[]);S(()=>e.value,()=>{b.value=e.value||[]});const g=h(()=>e.options.map(e=>"string"==typeof e||"number"==typeof e?{label:e,value:e}:e)),x=y(Symbol()),C=y(new Map),k=y(new Map);S(x,()=>{const e=new Map;for(const a of C.value.values())e.set(a,!0);k.value=e});return w(I,{cancelValue:e=>{C.value.delete(e),x.value=Symbol()},registerValue:(e,a)=>{C.value.set(e,a),x.value=Symbol()},toggleOption:a=>{const l=b.value.indexOf(a.value),n=[...b.value];-1===l?n.push(a.value):n.splice(l,1),void 0===e.value&&(b.value=n);const o=n.filter(e=>k.value.has(e)).sort((e,a)=>g.value.findIndex(a=>a.value===e)-g.value.findIndex(e=>e.value===a));t("update:value",o),t("change",o),s.onFieldChange()},mergedValue:b,name:h(()=>e.name),disabled:h(()=>e.disabled)}),o({mergedValue:b}),()=>{var a;const{id:t=s.id.value}=e;let o=null;return g.value&&g.value.length>0&&(o=g.value.map(a=>{var n;return O($,{prefixCls:i.value,key:a.value.toString(),disabled:"disabled"in a?a.disabled:e.disabled,indeterminate:a.indeterminate,value:a.value,checked:-1!==b.value.indexOf(a.value),onChange:a.onChange,class:`${d.value}-item`},{default:()=>[void 0!==l.label?null===(n=l.label)||void 0===n?void 0:n.call(l,a):a.label]})})),c(O("div",v(v({},n),{},{class:[d.value,{[`${d.value}-rtl`]:"rtl"===r.value},n.class,m.value],id:t}),[o||(null===(a=l.default)||void 0===a?void 0:a.call(l))]))}}});$.Group=G,$.install=function(e){return e.component($.name,$),e.component(G.name,G),e};export{G as CheckboxGroup,j as checkboxGroupProps,M as checkboxProps,$ as default};
