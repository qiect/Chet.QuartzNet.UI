function e(e,r){if(null==e)return;let t=e;for(let n=0;n<r.length;n++){if(void 0===t||void 0===t[r[n]])return;if(null===t||null===t[r[n]])return null;t=t[r[n]]}return t}function r(e,t,n){if(0===n.length)return t;const i=n[0];return n.length>1&&(t=r("object"==typeof e&&null!==e&&Object.prototype.hasOwnProperty.call(e,i)?e[i]:Number.isInteger(Number(n[1]))?[]:{},t,Array.prototype.slice.call(n,1))),Number.isInteger(Number(i))&&Array.isArray(e)?e.slice()[i]:Object.assign({},e,{[i]:t})}function t(e,n){if(null==e||0===n.length)return e;if(1===n.length){if(null==e)return e;if(Number.isInteger(n[0])&&Array.isArray(e))return Array.prototype.slice.call(e,0).splice(n[0],1);const r={};for(const t in e)r[t]=e[t];return delete r[n[0]],r}if(null==e[n[0]]){if(Number.isInteger(n[0])&&Array.isArray(e))return Array.prototype.concat.call([],e);const r={};for(const t in e)r[t]=e[t];return r}return r(e,t(e[n[0]],Array.prototype.slice.call(n,1)),[n[0]])}function n(t,n){return n.map(e=>e.split(".")).map(r=>[r,e(t,r)]).filter(e=>void 0!==e[1]).reduce((e,t)=>r(e,t[1],t[0]),{})}function i(e,r){return r.map(e=>e.split(".")).reduce((e,r)=>t(e,r),e)}function l(e,{storage:r,serializer:t,key:l,debug:o,pick:a,omit:u,beforeHydrate:s,afterHydrate:c},f,y=!0){try{y&&(null==s||s(f));const o=r.getItem(l);if(o){const r=t.deserialize(o),l=a?n(r,a):r,s=u?i(l,u):l;e.$patch(s)}y&&(null==c||c(f))}catch(p){}}function o(e,{storage:r,serializer:t,key:l,debug:o,pick:a,omit:u}){try{const o=a?n(e,a):e,s=u?i(o,u):o,c=t.serialize(s);r.setItem(l,c)}catch(s){}}function a(e={}){return function(r){var t;!function(e,r,t){const{pinia:n,store:i,options:{persist:a=t}}=e;if(!a)return;if(!(i.$id in n.state.value)){const e=n._s.get(i.$id.replace("__hot:",""));return void(e&&Promise.resolve().then(()=>e.$persist()))}const u=(Array.isArray(a)?a:!0===a?[{}]:[a]).map(r);i.$hydrate=({runHooks:r=!0}={})=>{u.forEach(t=>{l(i,t,e,r)})},i.$persist=()=>{u.forEach(e=>{o(i.$state,e)})},u.forEach(r=>{l(i,r,e),i.$subscribe((e,t)=>o(t,r),{detached:!0})})}(r,t=>{var n,i,l,o,a,u,s,c;const f=(y=t.key,p=r.store.$id,"function"==typeof y?y(p):"string"==typeof y?y:p);var y,p;return{key:(e.key?e.key:e=>e)(f),debug:null!=(i=null!=(n=t.debug)?n:e.debug)&&i,serializer:null!=(o=null!=(l=t.serializer)?l:e.serializer)?o:{serialize:e=>JSON.stringify(e),deserialize:e=>JSON.parse(e)},storage:null!=(u=null!=(a=t.storage)?a:e.storage)?u:window.localStorage,beforeHydrate:null!=(s=t.beforeHydrate)?s:e.beforeHydrate,afterHydrate:null!=(c=t.afterHydrate)?c:e.afterHydrate,pick:t.pick,omit:t.omit}},null!=(t=e.auto)&&t)}}export{a as createPersistedState};
