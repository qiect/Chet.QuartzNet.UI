import{I as e,P as t,g as l,m as o,_ as n,r as a,d as r,A as i,a as u,h as s,b as c,K as d,F as f}from"./bootstrap-BadVN9sI.js";import{p as v,a1 as p,E as m,L as h,P as b,U as y,aa as g}from"../jse/index-index-Cr7_Iy4w.js";import{T as C}from"./index-BWx2voRO.js";import{u as x}from"./useRefs-DktFujrz.js";import{u as S}from"./FormItemContext-Br2xbg7H.js";import"./Trigger-84iPrD0t.js";import"./ResizeObserver.es-C7U_o75s.js";import"./colors-B7qYdav-.js";var w={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z"}}]},name:"star",theme:"filled"};function $(e){for(var t=1;t<arguments.length;t++){var l=null!=arguments[t]?Object(arguments[t]):{},o=Object.keys(l);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(l).filter(function(e){return Object.getOwnPropertyDescriptor(l,e).enumerable}))),o.forEach(function(t){F(e,t,l[t])})}return e}function F(e,t,l){return t in e?Object.defineProperty(e,t,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[t]=l,e}var H=function(t,l){var o=$({},t,l.attrs);return v(e,$({},o,{icon:w}),null)};H.displayName="StarFilled",H.inheritAttrs=!1;const j=p({compatConfig:{MODE:3},name:"Star",inheritAttrs:!1,props:{value:Number,index:Number,prefixCls:String,allowHalf:{type:Boolean,default:void 0},disabled:{type:Boolean,default:void 0},character:t.any,characterRender:Function,focused:{type:Boolean,default:void 0},count:Number,onClick:Function,onHover:Function},emits:["hover","click"],setup(e,t){let{emit:l}=t;const o=t=>{const{index:o}=e;l("hover",t,o)},n=t=>{const{index:o}=e;l("click",t,o)},a=t=>{const{index:o}=e;13===t.keyCode&&l("click",t,o)},r=m(()=>{const{prefixCls:t,index:l,value:o,allowHalf:n,focused:a}=e,r=l+1;let i=t;return 0===o&&0===l&&a?i+=` ${t}-focused`:n&&o+.5>=r&&o<r?(i+=` ${t}-half ${t}-active`,a&&(i+=` ${t}-focused`)):(i+=r<=o?` ${t}-full`:` ${t}-zero`,r===o&&a&&(i+=` ${t}-focused`)),i});return()=>{const{disabled:t,prefixCls:l,characterRender:i,character:u,index:s,count:c,value:d}=e,f="function"==typeof u?u({disabled:t,prefixCls:l,index:s,count:c,value:d}):u;let p=v("li",{class:r.value},[v("div",{onClick:t?null:n,onKeydown:t?null:a,onMousemove:t?null:o,role:"radio","aria-checked":d>s?"true":"false","aria-posinset":s+1,"aria-setsize":c,tabindex:t?-1:0},[v("div",{class:`${l}-first`},[f]),v("div",{class:`${l}-second`},[f])])]);return i&&(p=i(p,e)),p}}}),k=e=>{const{componentCls:t}=e;return{[`${t}-star`]:{position:"relative",display:"inline-block",color:"inherit",cursor:"pointer","&:not(:last-child)":{marginInlineEnd:e.marginXS},"> div":{transition:`all ${e.motionDurationMid}, outline 0s`,"&:hover":{transform:e.rateStarHoverScale},"&:focus":{outline:0},"&:focus-visible":{outline:`${e.lineWidth}px dashed ${e.rateStarColor}`,transform:e.rateStarHoverScale}},"&-first, &-second":{color:e.defaultColor,transition:`all ${e.motionDurationMid}`,userSelect:"none",[e.iconCls]:{verticalAlign:"middle"}},"&-first":{position:"absolute",top:0,insetInlineStart:0,width:"50%",height:"100%",overflow:"hidden",opacity:0},[`&-half ${t}-star-first, &-half ${t}-star-second`]:{opacity:1},[`&-half ${t}-star-first, &-full ${t}-star-second`]:{color:"inherit"}}}},O=e=>({[`&-rtl${e.componentCls}`]:{direction:"rtl"}}),B=e=>{const{componentCls:t}=e;return{[t]:n(n(n(n(n({},a(e)),{display:"inline-block",margin:0,padding:0,color:e.rateStarColor,fontSize:e.rateStarSize,lineHeight:"unset",listStyle:"none",outline:"none",[`&-disabled${t} ${t}-star`]:{cursor:"default","&:hover":{transform:"scale(1)"}}}),k(e)),{[`+ ${t}-text`]:{display:"inline-block",marginInlineStart:e.marginXS,fontSize:e.fontSize}}),O(e))}},V=l("Rate",e=>{const{colorFillContent:t}=e,l=o(e,{rateStarColor:e["yellow-6"],rateStarSize:.5*e.controlHeightLG,rateStarHoverScale:"scale(1.1)",defaultColor:t});return[B(l)]}),D=()=>({prefixCls:String,count:Number,value:Number,allowHalf:{type:Boolean,default:void 0},allowClear:{type:Boolean,default:void 0},tooltips:Array,disabled:{type:Boolean,default:void 0},character:t.any,autofocus:{type:Boolean,default:void 0},tabindex:t.oneOfType([t.number,t.string]),direction:String,id:String,onChange:Function,onHoverChange:Function,"onUpdate:value":Function,onFocus:Function,onBlur:Function,onKeydown:Function}),L=r(p({compatConfig:{MODE:3},name:"ARate",inheritAttrs:!1,props:i(D(),{value:0,count:5,allowHalf:!1,allowClear:!0,tabindex:0,direction:"ltr"}),setup(e,t){let{slots:l,attrs:o,emit:n,expose:a}=t;const{prefixCls:r,direction:i}=u("rate",e),[p,m]=V(r),w=S(),$=h(),[F,k]=x(),O=b({value:e.value,focused:!1,cleanedValue:null,hoverValue:void 0});y(()=>e.value,()=>{O.value=e.value});const B=(t,l)=>{const o="rtl"===i.value;let n=t+1;if(e.allowHalf){const e=(e=>f(k.value.get(e)))(t),a=function(e){const t=function(e){let t,l;const o=e.ownerDocument,{body:n}=o,a=o&&o.documentElement,r=e.getBoundingClientRect();return t=r.left,l=r.top,t-=a.clientLeft||n.clientLeft||0,l-=a.clientTop||n.clientTop||0,{left:t,top:l}}(e),l=e.ownerDocument,o=l.defaultView||l.parentWindow;return t.left+=function(e){let t=e.scrollX;const l="scrollLeft";if("number"!=typeof t){const o=e.document;t=o.documentElement[l],"number"!=typeof t&&(t=o.body[l])}return t}(o),t.left}(e),r=e.clientWidth;(o&&l-a>r/2||!o&&l-a<r/2)&&(n-=.5)}return n},D=t=>{void 0===e.value&&(O.value=t),n("update:value",t),n("change",t),w.onFieldChange()},L=(e,t)=>{const l=B(t,e.pageX);l!==O.cleanedValue&&(O.hoverValue=l,O.cleanedValue=null),n("hoverChange",l)},R=()=>{O.hoverValue=void 0,O.cleanedValue=null,n("hoverChange",void 0)},z=(t,l)=>{const{allowClear:o}=e,n=B(l,t.pageX);let a=!1;o&&(a=n===O.value),R(),D(a?0:n),O.cleanedValue=a?n:null},E=e=>{O.focused=!0,n("focus",e)},T=e=>{O.focused=!1,n("blur",e),w.onFieldBlur()},A=t=>{const{keyCode:l}=t,{count:o,allowHalf:a}=e,r="rtl"===i.value;l===d.RIGHT&&O.value<o&&!r?(O.value+=a?.5:1,D(O.value),t.preventDefault()):l===d.LEFT&&O.value>0&&!r||l===d.RIGHT&&O.value>0&&r?(O.value-=a?.5:1,D(O.value),t.preventDefault()):l===d.LEFT&&O.value<o&&r&&(O.value+=a?.5:1,D(O.value),t.preventDefault()),n("keydown",t)},I=()=>{e.disabled||$.value.focus()};a({focus:I,blur:()=>{e.disabled||$.value.blur()}}),g(()=>{const{autofocus:t,disabled:l}=e;t&&!l&&I()});const M=(t,l)=>{let{index:o}=l;const{tooltips:n}=e;return n?v(C,{title:n[o]},{default:()=>[t]}):t};return()=>{const{count:t,allowHalf:n,disabled:a,tabindex:u,id:d=w.id.value}=e,{class:f,style:h}=o,b=[],y=a?`${r.value}-disabled`:"",g=e.character||l.character||(()=>v(H,null,null));for(let e=0;e<t;e++)b.push(v(j,{ref:F(e),key:e,index:e,count:t,disabled:a,prefixCls:`${r.value}-star`,allowHalf:n,value:void 0===O.hoverValue?O.value:O.hoverValue,onClick:z,onHover:L,character:g,characterRender:M,focused:O.focused},null));const C=s(r.value,y,f,{[m.value]:!0,[`${r.value}-rtl`]:"rtl"===i.value});return p(v("ul",c(c({},o),{},{id:d,class:C,style:h,onMouseleave:a?null:R,tabindex:a?-1:u,onFocus:a?null:E,onBlur:a?null:T,onKeydown:a?null:A,ref:$,role:"radiogroup"}),[b]))}}}));export{L as default,D as rateProps};
