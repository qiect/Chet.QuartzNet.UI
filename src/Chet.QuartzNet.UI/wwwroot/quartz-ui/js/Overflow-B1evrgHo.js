import{P as e,b as t,h as l,_ as n}from"./bootstrap-DXlrt1hk.js";import{R as a}from"./index-CHp-6w-c.js";import{a1 as r,N as o,E as i,a2 as u,L as s,ad as v,p as d,a3 as p,U as c}from"../jse/index-index-DYXaZXJd.js";const m=Symbol("OverflowContextProviderKey"),f=r({compatConfig:{MODE:3},name:"OverflowContextProvider",inheritAttrs:!1,props:{value:{type:Object}},setup(e,t){let{slots:l}=t;return u(m,i(()=>e.value)),()=>{var e;return null===(e=l.default)||void 0===e?void 0:e.call(l)}}});const y=void 0,b=r({compatConfig:{MODE:3},name:"Item",props:{prefixCls:String,item:e.any,renderItem:Function,responsive:Boolean,itemKey:{type:[String,Number]},registerSize:Function,display:Boolean,order:Number,component:e.any,invalidate:Boolean},setup(e,n){let{slots:r,expose:o}=n;const u=i(()=>e.responsive&&!e.display),p=s();function c(t){e.registerSize(e.itemKey,t)}return o({itemNodeRef:p}),v(()=>{c(null)}),()=>{var n;const{prefixCls:o,invalidate:i,item:s,renderItem:v,responsive:m,registerSize:f,itemKey:b,display:g,order:O,component:x="div"}=e,h=function(e,t){var l={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(l[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(l[n[a]]=e[n[a]])}return l}(e,["prefixCls","invalidate","item","renderItem","responsive","registerSize","itemKey","display","order","component"]),S=null===(n=r.default)||void 0===n?void 0:n.call(r),w=v&&s!==y?v(s):S;let C;i||(C={opacity:u.value?0:1,height:u.value?0:y,overflowY:u.value?"hidden":y,order:m?O:y,pointerEvents:u.value?"none":y,position:u.value?"absolute":y});const I={};return u.value&&(I["aria-hidden"]=!0),d(a,{disabled:!m,onResize:e=>{let{offsetWidth:t}=e;c(t)}},{default:()=>d(x,t(t(t({class:l(!i&&o),style:C},I),h),{},{ref:p}),{default:()=>[w]})})}}});var g=function(e,t){var l={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(l[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(l[n[a]]=e[n[a]])}return l};const O=r({compatConfig:{MODE:3},name:"RawItem",inheritAttrs:!1,props:{component:e.any,title:e.any,id:String,onMouseenter:{type:Function},onMouseleave:{type:Function},onClick:{type:Function},onKeydown:{type:Function},onFocus:{type:Function},role:String,tabindex:Number},setup(e,n){let{slots:a,attrs:r}=n;const u=o(m,i(()=>null));return()=>{var n;if(!u.value){const{component:l="div"}=e,o=g(e,["component"]);return d(l,t(t({},o),r),{default:()=>[null===(n=a.default)||void 0===n?void 0:n.call(a)]})}const o=u.value,{className:i}=o,s=g(o,["className"]),{class:v}=r,p=g(r,["class"]);return d(f,{value:null},{default:()=>[d(b,t(t(t({class:l(i,v)},s),p),e),a)]})}}});const x="responsive",h="invalidate";function S(e){return`+ ${e.length} ...`}const w=r({name:"Overflow",inheritAttrs:!1,props:{id:String,prefixCls:String,data:Array,itemKey:[String,Number,Function],itemWidth:{type:Number,default:10},renderItem:Function,renderRawItem:Function,maxCount:[Number,String],renderRest:Function,renderRawRest:Function,suffix:e.any,component:String,itemComponent:e.any,onVisibleChange:Function,ssr:String,onMousedown:Function,role:String},emits:["visibleChange"],setup(e,r){let{attrs:o,emit:u,slots:s}=r;const v=i(()=>"full"===e.ssr),m=p(null),y=i(()=>m.value||0),g=p(new Map),O=p(0),w=p(0),C=p(0),I=p(null),j=p(null),E=i(()=>null===j.value&&v.value?Number.MAX_SAFE_INTEGER:j.value||0),F=p(!1),N=i(()=>`${e.prefixCls}-item`),R=i(()=>Math.max(O.value,w.value)),K=i(()=>!(!e.data.length||e.maxCount!==x)),M=i(()=>e.maxCount===h),P=i(()=>K.value||"number"==typeof e.maxCount&&e.data.length>e.maxCount),z=i(()=>{let t=e.data;return K.value?t=null===m.value&&v.value?e.data:e.data.slice(0,Math.min(e.data.length,y.value/e.itemWidth)):"number"==typeof e.maxCount&&(t=e.data.slice(0,e.maxCount)),t}),A=i(()=>K.value?e.data.slice(E.value+1):e.data.slice(z.value.length)),k=(t,l)=>{var n;return"function"==typeof e.itemKey?e.itemKey(t):null!==(n=e.itemKey&&(null==t?void 0:t[e.itemKey]))&&void 0!==n?n:l},$=i(()=>e.renderItem||(e=>e)),_=(t,l)=>{j.value=t,l||(F.value=t<e.data.length-1,u("visibleChange",t))},D=(e,t)=>{m.value=t.clientWidth},T=(e,t)=>{const l=new Map(g.value);null===t?l.delete(e):l.set(e,t),g.value=l},W=(e,t)=>{O.value=w.value,w.value=t},B=(e,t)=>{C.value=t},V=e=>g.value.get(k(z.value[e],e));return c([y,g,w,C,()=>e.itemKey,z],()=>{if(y.value&&R.value&&z.value){let t=C.value;const l=z.value.length,n=l-1;if(!l)return _(0),void(I.value=null);for(let e=0;e<l;e+=1){const l=V(e);if(void 0===l){_(e-1,!0);break}if(t+=l,0===n&&t<=y.value||e===n-1&&t+V(n)<=y.value){_(n),I.value=null;break}if(t+R.value>y.value){_(e-1),I.value=t-l-C.value+w.value;break}}e.suffix&&V(0)+C.value>y.value&&(I.value=null)}}),()=>{const r=F.value&&!!A.value.length,{itemComponent:i,renderRawItem:u,renderRawRest:v,renderRest:p,prefixCls:c="rc-overflow",suffix:m,component:y="div",id:g,onMousedown:O}=e,{class:x,style:h}=o,w=function(e,t){var l={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(l[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(l[n[a]]=e[n[a]])}return l}(o,["class","style"]);let C={};null!==I.value&&K.value&&(C={position:"absolute",left:`${I.value}px`,top:0});const j={prefixCls:N.value,responsive:K.value,component:i,invalidate:M.value},R=u?(e,t)=>{const l=k(e,t);return d(f,{key:l,value:n(n({},j),{order:t,item:e,itemKey:l,registerSize:T,display:t<=E.value})},{default:()=>[u(e,t)]})}:(e,l)=>{const n=k(e,l);return d(b,t(t({},j),{},{order:l,key:n,item:e,renderItem:$.value,itemKey:n,registerSize:T,display:l<=E.value}),null)};let _=()=>null;const V={order:r?E.value:Number.MAX_SAFE_INTEGER,className:`${N.value} ${N.value}-rest`,registerSize:W,display:r};if(v)v&&(_=()=>d(f,{value:n(n({},j),V)},{default:()=>[v(A.value)]}));else{const e=p||S;_=()=>d(b,t(t({},j),V),{default:()=>"function"==typeof e?e(A.value):e})}return d(a,{disabled:!K.value,onResize:D},{default:()=>{var n;return d(y,t({id:g,class:l(!M.value&&c,x),style:h,onMousedown:O,role:e.role},w),{default:()=>[z.value.map(R),P.value?_():null,m&&d(b,t(t({},j),{},{order:E.value,class:`${N.value}-suffix`,registerSize:B,display:!0,style:C}),{default:()=>m}),null===(n=s.default)||void 0===n?void 0:n.call(s)]})}})}}});w.Item=O,w.RESPONSIVE=x,w.INVALIDATE=h;export{w as O};
